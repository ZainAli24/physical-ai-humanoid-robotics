"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_01=globalThis.webpackChunkphysical_ai_humanoid_robotics_01||[]).push([[751],{2231:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"module-1-ros2/building-packages-python","title":"Building ROS 2 Packages with Python","description":"Prerequisites","source":"@site/docs/module-1-ros2/building-packages-python.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/building-packages-python","permalink":"/physical-ai-humanoid-robotics/docs/module-1-ros2/building-packages-python","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-ros2/building-packages-python.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"mainSidebar","previous":{"title":"Nodes, Topics, and Services","permalink":"/physical-ai-humanoid-robotics/docs/module-1-ros2/nodes-topics-services"},"next":{"title":"Introduction to Gazebo","permalink":"/physical-ai-humanoid-robotics/docs/module-2-gazebo/intro-gazebo"}}');var l=s(4848),i=s(8453);const c={sidebar_position:3},o="Building ROS 2 Packages with Python",t={},a=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Introduction",id:"introduction",level:2},{value:"Package Structure",id:"package-structure",level:2},{value:"Key Files and Directories",id:"key-files-and-directories",level:3},{value:"Package Naming Conventions",id:"package-naming-conventions",level:3},{value:"Why This Structure Matters",id:"why-this-structure-matters",level:3},{value:"Creating a Package",id:"creating-a-package",level:2},{value:"The Package Creation Command",id:"the-package-creation-command",level:3},{value:"Optional Arguments",id:"optional-arguments",level:3},{value:"Package Naming Conventions",id:"package-naming-conventions-1",level:3},{value:"Where to Run the Command",id:"where-to-run-the-command",level:3},{value:"Adding Nodes to Packages",id:"adding-nodes-to-packages",level:2},{value:"The Entry Points System",id:"the-entry-points-system",level:3},{value:"Understanding Entry Points",id:"understanding-entry-points",level:3},{value:"Adding Your Node Files",id:"adding-your-node-files",level:3},{value:"Why This Matters",id:"why-this-matters",level:3},{value:"Common Mistakes",id:"common-mistakes",level:3},{value:"Launch Files",id:"launch-files",level:2},{value:"Python Launch API (The Modern Approach)",id:"python-launch-api-the-modern-approach",level:3},{value:"Basic Launch File Structure",id:"basic-launch-file-structure",level:3},{value:"Launching Multiple Nodes",id:"launching-multiple-nodes",level:3},{value:"Advanced Launch File: Parameters and Remapping",id:"advanced-launch-file-parameters-and-remapping",level:3},{value:"Installing Launch Files",id:"installing-launch-files",level:3},{value:"Why Use Launch Files?",id:"why-use-launch-files",level:3},{value:"XML vs. Python Launch Files",id:"xml-vs-python-launch-files",level:3},{value:"Workspace Organization",id:"workspace-organization",level:2},{value:"The Four Directories",id:"the-four-directories",level:3},{value:"Why This Separation Matters",id:"why-this-separation-matters",level:3},{value:"Typical Workflow",id:"typical-workflow",level:3},{value:"Building with colcon",id:"building-with-colcon",level:2},{value:"Basic Build Command",id:"basic-build-command",level:3},{value:"Building Specific Packages",id:"building-specific-packages",level:3},{value:"Useful Build Flags",id:"useful-build-flags",level:3},{value:"Common Build Errors",id:"common-build-errors",level:3},{value:"Clean Builds",id:"clean-builds",level:3},{value:"Build Parallelization",id:"build-parallelization",level:3},{value:"Sourcing Workspaces",id:"sourcing-workspaces",level:2},{value:"The Setup Script",id:"the-setup-script",level:3},{value:"Shell-Specific Setup Files",id:"shell-specific-setup-files",level:3},{value:"Automatic Sourcing",id:"automatic-sourcing",level:3},{value:"Workspace Overlays",id:"workspace-overlays",level:3},{value:"setup.bash vs. local_setup.bash",id:"setupbash-vs-local_setupbash",level:3},{value:"Verifying Sourcing",id:"verifying-sourcing",level:3},{value:"Mini-Project: Turtlesim Controller",id:"mini-project-turtlesim-controller",level:2},{value:"Project Goal",id:"project-goal",level:3},{value:"Step 1: Create the Package",id:"step-1-create-the-package",level:3},{value:"Step 2: Create the Controller Node",id:"step-2-create-the-controller-node",level:3},{value:"Step 3: Configure Entry Points",id:"step-3-configure-entry-points",level:3},{value:"Step 4: Create the Launch File",id:"step-4-create-the-launch-file",level:3},{value:"Step 5: Install Launch Files",id:"step-5-install-launch-files",level:3},{value:"Step 6: Build the Package",id:"step-6-build-the-package",level:3},{value:"Step 7: Source the Workspace",id:"step-7-source-the-workspace",level:3},{value:"Step 8: Run the Mini-Project",id:"step-8-run-the-mini-project",level:3},{value:"Step 9: Experiment and Extend",id:"step-9-experiment-and-extend",level:3},{value:"Troubleshooting",id:"troubleshooting",level:3},{value:"What You&#39;ve Learned",id:"what-youve-learned",level:3},{value:"Controller Node Code",id:"controller-node-code",level:3},{value:"Package Configuration (package.xml)",id:"package-configuration-packagexml",level:3},{value:"Build Configuration (setup.py)",id:"build-configuration-setuppy",level:3},{value:"Launch File Code",id:"launch-file-code",level:3},{value:"Hands-On Exercises",id:"hands-on-exercises",level:2},{value:"Exercise 1: Create Your First Package",id:"exercise-1-create-your-first-package",level:3},{value:"Exercise 2: Add a Node from Chapter 2",id:"exercise-2-add-a-node-from-chapter-2",level:3},{value:"Exercise 3: Create a Launch File",id:"exercise-3-create-a-launch-file",level:3},{value:"Exercise 4: Extend the Turtlesim Controller",id:"exercise-4-extend-the-turtlesim-controller",level:3},{value:"Key Takeaways",id:"key-takeaways",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"building-ros-2-packages-with-python",children:"Building ROS 2 Packages with Python"})}),"\n",(0,l.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Completed Nodes, Topics, and Services chapter"}),"\n",(0,l.jsx)(n.li,{children:"Understanding of publisher-subscriber pattern"}),"\n",(0,l.jsx)(n.li,{children:"ROS 2 Humble installed and configured"}),"\n",(0,l.jsx)(n.li,{children:"Basic Python 3.10+ programming knowledge"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,l.jsxs)(n.p,{children:["In the previous chapters, you learned to write individual ROS 2 nodes that communicate through topics and services. While these scripts work perfectly for learning and experimentation, professional robotics development requires more structure. ",(0,l.jsx)(n.strong,{children:"Packages"})," are the fundamental unit of organization in ROS 2, transforming loose collections of Python files into reusable, shareable software components."]}),"\n",(0,l.jsx)(n.p,{children:"Think of packages as the difference between having random recipe cards scattered across your kitchen versus a well-organized cookbook with an index, ingredient lists, and proper instructions. Packages bundle your nodes, launch files, configuration, and dependencies into a coherent unit that others (or your future self) can install, build, and run with a single command. They enable version control, dependency management, and the professional workflows used by robotics teams at companies like Boston Dynamics, Waymo, and NASA's Jet Propulsion Laboratory."}),"\n",(0,l.jsxs)(n.p,{children:["By the end of this chapter, you'll create a complete turtlesim controller package from scratch\u2014writing nodes, configuring metadata, building with ",(0,l.jsx)(n.code,{children:"colcon"}),", and launching multi-node systems. This is where your robotics code becomes production-ready."]}),"\n",(0,l.jsx)(n.h2,{id:"package-structure",children:"Package Structure"}),"\n",(0,l.jsx)(n.p,{children:"Before creating your first package, understanding its anatomy is essential. A ROS 2 Python package follows a standardized directory structure that build tools, IDEs, and other developers immediately recognize. This consistency is what makes ROS 2 packages shareable across teams and organizations."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n    Root[my_robot_package/] --\x3e PkgXML[package.xml<br/>Dependencies & Metadata]\n    Root --\x3e Setup[setup.py<br/>Build Configuration]\n    Root --\x3e SetupCfg[setup.cfg<br/>Install Configuration]\n    Root --\x3e Resource[resource/<br/>Package Marker]\n    Root --\x3e Src[my_robot_package/<br/>Source Code]\n    Root --\x3e Test[test/<br/>Unit Tests]\n\n    Src --\x3e Init[__init__.py]\n    Src --\x3e Node1[publisher_node.py]\n    Src --\x3e Node2[subscriber_node.py]\n\n    Test --\x3e TestInit[__init__.py]\n    Test --\x3e TestPub[test_publisher.py]\n    Test --\x3e TestSub[test_subscriber.py]\n\n    style Root fill:#e1f5ff,stroke:#01579b,stroke-width:3px\n    style PkgXML fill:#fff4e1,stroke:#ff6f00,stroke-width:2px\n    style Setup fill:#fff4e1,stroke:#ff6f00,stroke-width:2px\n    style Src fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px\n    style Test fill:#fce4ec,stroke:#880e4f,stroke-width:2px\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.em,{children:"Figure 1: ROS 2 package directory showing package.xml, setup.py, src with Python modules, test folder"})}),"\n",(0,l.jsx)(n.h3,{id:"key-files-and-directories",children:"Key Files and Directories"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"package.xml"})," - The package manifest file that defines metadata and dependencies. This XML file declares which other ROS 2 packages your code requires (like ",(0,l.jsx)(n.code,{children:"rclpy"}),", ",(0,l.jsx)(n.code,{children:"geometry_msgs"}),", or ",(0,l.jsx)(n.code,{children:"sensor_msgs"}),"), the package version, maintainer information, and license. When you run ",(0,l.jsx)(n.code,{children:"colcon build"}),", this file tells the build system what to install before compiling your package. Think of it as your package's ID card and shopping list combined."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"setup.py"})," - The Python build configuration file that defines entry points for executables. This is where you tell ROS 2 which Python scripts should become runnable commands. For example, if you write a ",(0,l.jsx)(n.code,{children:"publisher_node.py"})," file, you configure ",(0,l.jsx)(n.code,{children:"setup.py"})," to create a ",(0,l.jsx)(n.code,{children:"publisher_node"})," executable that users can launch with ",(0,l.jsx)(n.code,{children:"ros2 run my_package publisher_node"}),". It follows standard Python packaging conventions from ",(0,l.jsx)(n.code,{children:"setuptools"}),", making ROS 2 packages compatible with Python's ecosystem."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"setup.cfg"})," - A companion file to ",(0,l.jsx)(n.code,{children:"setup.py"})," that specifies installation paths. It ensures your package installs into the correct directories within the ROS 2 workspace (",(0,l.jsx)(n.code,{children:"install/lib/my_package/"})," for executables, ",(0,l.jsx)(n.code,{children:"install/share/my_package/"})," for data files). You rarely need to modify this file manually\u2014the package creation tool generates it with sensible defaults."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"resource/"})," - A directory containing a marker file with your package name. This empty file signals to ROS 2 tools that this directory is indeed a valid package. It's part of the ROS 2 package discovery mechanism. While it seems redundant, it enables workspace overlay features and prevents false-positive package detections."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"my_robot_package/"})," (source directory) - The Python module containing your node implementations. This directory ",(0,l.jsx)(n.strong,{children:"must"})," have the same name as your package and include an ",(0,l.jsx)(n.code,{children:"__init__.py"})," file to make it a proper Python module. All your ",(0,l.jsx)(n.code,{children:".py"})," node files go here. When you import code between nodes (like ",(0,l.jsx)(n.code,{children:"from my_robot_package.utils import helper_function"}),"), Python uses this module structure."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"test/"})," - Contains unit tests for your nodes. Following test-driven development practices, this directory mirrors your source structure with corresponding test files. Tests validate that your nodes publish correct message types, subscribe to expected topics, and handle edge cases. They're optional during initial learning but essential for production code."]}),"\n",(0,l.jsx)(n.h3,{id:"package-naming-conventions",children:"Package Naming Conventions"}),"\n",(0,l.jsxs)(n.p,{children:["ROS 2 package names must use ",(0,l.jsx)(n.strong,{children:"lowercase with underscores"})," (snake_case): ",(0,l.jsx)(n.code,{children:"my_robot_controller"}),", not ",(0,l.jsx)(n.code,{children:"MyRobotController"})," or ",(0,l.jsx)(n.code,{children:"my-robot-controller"}),". This convention ensures compatibility across filesystems and build tools. Avoid generic names like ",(0,l.jsx)(n.code,{children:"utils"})," or ",(0,l.jsx)(n.code,{children:"nodes"}),"\u2014instead, prefix with your project name: ",(0,l.jsx)(n.code,{children:"turtlesim_controller"}),", ",(0,l.jsx)(n.code,{children:"warehouse_navigator"}),"."]}),"\n",(0,l.jsx)(n.h3,{id:"why-this-structure-matters",children:"Why This Structure Matters"}),"\n",(0,l.jsxs)(n.p,{children:["This standardized layout enables powerful features. Build tools like ",(0,l.jsx)(n.code,{children:"colcon"})," automatically find all packages in your workspace by scanning for ",(0,l.jsx)(n.code,{children:"package.xml"})," files. IDEs like VSCode with ROS extensions auto-complete imports because they recognize the source directory structure. Other developers instantly understand where to find node implementations, tests, and dependencies. Most importantly, this structure makes your package distributable\u2014you can push it to GitHub, and anyone with ROS 2 can clone, build, and run it with three commands."]}),"\n",(0,l.jsx)(n.h2,{id:"creating-a-package",children:"Creating a Package"}),"\n",(0,l.jsx)(n.p,{children:"Now that you understand package anatomy, let's create your first package. ROS 2 provides a command-line tool that scaffolds the entire structure automatically."}),"\n",(0,l.jsx)(n.h3,{id:"the-package-creation-command",children:"The Package Creation Command"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ros2 pkg create --build-type ament_python my_robot_controller\n"})}),"\n",(0,l.jsx)(n.p,{children:"This single command generates a complete package skeleton with all required files. Let's break down the arguments:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"ros2 pkg create"})})," - The ROS 2 package creation utility"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"--build-type ament_python"})})," - Specifies a Python package (alternative: ",(0,l.jsx)(n.code,{children:"ament_cmake"})," for C++)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"my_robot_controller"})})," - Your package name (must be lowercase with underscores)"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Output"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"going to create a new package\npackage name: my_robot_controller\ndestination directory: /home/user/ros2_ws/src\npackage format: 3\nversion: 0.0.0\ndescription: TODO: Package description\nmaintainer: ['user <user@todo.todo>']\nlicenses: ['TODO: License declaration']\nbuild type: ament_python\ndependencies: []\ncreating folder ./my_robot_controller\ncreating ./my_robot_controller/package.xml\ncreating source and test folder\ncreating folder ./my_robot_controller/my_robot_controller\ncreating ./my_robot_controller/setup.py\ncreating ./my_robot_controller/setup.cfg\ncreating folder ./my_robot_controller/resource\ncreating ./my_robot_controller/resource/my_robot_controller\ncreating ./my_robot_controller/my_robot_controller/__init__.py\ncreating folder ./my_robot_controller/test\ncreating ./my_robot_controller/test/test_copyright.py\ncreating ./my_robot_controller/test/test_flake8.py\ncreating ./my_robot_controller/test/test_pep257.py\n"})}),"\n",(0,l.jsx)(n.h3,{id:"optional-arguments",children:"Optional Arguments"}),"\n",(0,l.jsx)(n.p,{children:"You can provide additional metadata during creation:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'ros2 pkg create --build-type ament_python my_robot_controller \\\n  --dependencies rclpy geometry_msgs sensor_msgs \\\n  --description "Controller for mobile robot navigation" \\\n  --license Apache-2.0 \\\n  --maintainer-name "Your Name" \\\n  --maintainer-email "you@example.com"\n'})}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"--dependencies"})," flag automatically adds entries to ",(0,l.jsx)(n.code,{children:"package.xml"}),", saving you manual editing. Common dependencies for Python nodes include ",(0,l.jsx)(n.code,{children:"rclpy"})," (ROS 2 Python client library), ",(0,l.jsx)(n.code,{children:"std_msgs"}),", ",(0,l.jsx)(n.code,{children:"geometry_msgs"}),", and ",(0,l.jsx)(n.code,{children:"sensor_msgs"}),"."]}),"\n",(0,l.jsx)(n.h3,{id:"package-naming-conventions-1",children:"Package Naming Conventions"}),"\n",(0,l.jsx)(n.p,{children:"Follow these rules to avoid build errors:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Lowercase only"}),": ",(0,l.jsx)(n.code,{children:"turtlesim_controller"})," \u2713, ",(0,l.jsx)(n.code,{children:"TurtlesimController"})," \u2717"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Underscores, not hyphens"}),": ",(0,l.jsx)(n.code,{children:"my_robot_pkg"})," \u2713, ",(0,l.jsx)(n.code,{children:"my-robot-pkg"})," \u2717"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"No spaces or special characters"}),": ",(0,l.jsx)(n.code,{children:"robot_controller"})," \u2713, ",(0,l.jsx)(n.code,{children:"robot controller!"})," \u2717"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Descriptive and scoped"}),": ",(0,l.jsx)(n.code,{children:"warehouse_nav"})," \u2713, ",(0,l.jsx)(n.code,{children:"utils"})," \u2717 (too generic)"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"where-to-run-the-command",children:"Where to Run the Command"}),"\n",(0,l.jsxs)(n.p,{children:["Always create packages inside the ",(0,l.jsx)(n.code,{children:"src/"})," directory of your workspace:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python my_robot_controller\n"})}),"\n",(0,l.jsxs)(n.p,{children:["This ensures ",(0,l.jsx)(n.code,{children:"colcon build"})," (run from workspace root) can discover and build your package automatically."]}),"\n",(0,l.jsx)(n.h2,{id:"adding-nodes-to-packages",children:"Adding Nodes to Packages"}),"\n",(0,l.jsxs)(n.p,{children:["Creating a package generates the structure, but your nodes (the Python scripts from Chapter 2) need proper integration to become package executables. This is where ",(0,l.jsx)(n.code,{children:"setup.py"})," configuration becomes critical."]}),"\n",(0,l.jsx)(n.h3,{id:"the-entry-points-system",children:"The Entry Points System"}),"\n",(0,l.jsxs)(n.p,{children:["Remember writing standalone nodes like ",(0,l.jsx)(n.code,{children:"publisher_node.py"}),"? To run them with ",(0,l.jsx)(n.code,{children:"ros2 run"}),", you must declare them as ",(0,l.jsx)(n.strong,{children:"entry points"})," in ",(0,l.jsx)(n.code,{children:"setup.py"}),". Open your package's ",(0,l.jsx)(n.code,{children:"setup.py"})," file and locate the ",(0,l.jsx)(n.code,{children:"entry_points"})," section:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\n\npackage_name = 'my_robot_controller'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='Your Name',\n    maintainer_email='you@example.com',\n    description='Controller for mobile robot navigation',\n    license='Apache-2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'velocity_publisher = my_robot_controller.velocity_publisher:main',\n            'pose_subscriber = my_robot_controller.pose_subscriber:main',\n        ],\n    },\n)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"understanding-entry-points",children:"Understanding Entry Points"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"console_scripts"})," list defines executable commands:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"'velocity_publisher = my_robot_controller.velocity_publisher:main'\n"})}),"\n",(0,l.jsx)(n.p,{children:"Breaking this down:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"velocity_publisher"})})," - The command name you'll use with ",(0,l.jsx)(n.code,{children:"ros2 run"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"my_robot_controller.velocity_publisher"})})," - Python module path (package_name.file_name)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:":main"})})," - The function to execute (conventionally ",(0,l.jsx)(n.code,{children:"main()"}),")"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["This tells ",(0,l.jsx)(n.code,{children:"setuptools"}),': "When someone runs ',(0,l.jsx)(n.code,{children:"ros2 run my_robot_controller velocity_publisher"}),", execute the ",(0,l.jsx)(n.code,{children:"main()"})," function from ",(0,l.jsx)(n.code,{children:"my_robot_controller/velocity_publisher.py"}),'."']}),"\n",(0,l.jsx)(n.h3,{id:"adding-your-node-files",children:"Adding Your Node Files"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Place your node in the source directory"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Create your node file\ntouch ~/ros2_ws/src/my_robot_controller/my_robot_controller/velocity_publisher.py\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Write your node code"})," (same rclpy.node.Node pattern from Chapter 2)"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Add entry point to setup.py"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"entry_points={\n    'console_scripts': [\n        'velocity_publisher = my_robot_controller.velocity_publisher:main',\n    ],\n},\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Build and install"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select my_robot_controller\nsource install/setup.bash\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Test executability"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ros2 run my_robot_controller velocity_publisher\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"why-this-matters",children:"Why This Matters"}),"\n",(0,l.jsxs)(n.p,{children:["Without entry points, your Python scripts remain just scripts\u2014you'd need to run them with ",(0,l.jsx)(n.code,{children:"python3 my_robot_controller/velocity_publisher.py"}),", which bypasses ROS 2's workspace sourcing and discovery mechanisms. Entry points integrate your nodes into the ROS 2 ecosystem, enabling:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Discovery"}),": ",(0,l.jsx)(n.code,{children:"ros2 pkg executables my_robot_controller"})," lists your nodes"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Launch file compatibility"}),": Launch files can reference nodes by executable name"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Workspace overlays"}),": Properly sourced executables respect workspace precedence"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Installation"}),": ",(0,l.jsx)(n.code,{children:"colcon install"})," places executables in standard paths"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"common-mistakes",children:"Common Mistakes"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Mistake 1"}),": Forgetting to rebuild after modifying ",(0,l.jsx)(n.code,{children:"setup.py"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# After adding entry points, you MUST rebuild\ncolcon build --packages-select my_robot_controller\nsource install/setup.bash\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Mistake 2"}),": Mismatched module paths"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# File location: my_robot_controller/velocity_publisher.py\n# CORRECT:\n'velocity_publisher = my_robot_controller.velocity_publisher:main'\n# WRONG (missing package name):\n'velocity_publisher = velocity_publisher:main'\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Mistake 3"}),": Missing ",(0,l.jsx)(n.code,{children:"main()"})," function\nEvery node file must have a ",(0,l.jsx)(n.code,{children:"main()"})," function that entry points can call."]}),"\n",(0,l.jsx)(n.h2,{id:"launch-files",children:"Launch Files"}),"\n",(0,l.jsxs)(n.p,{children:["As your robot systems grow, manually starting nodes one-by-one in separate terminals becomes impractical. ",(0,l.jsx)(n.strong,{children:"Launch files"})," solve this by starting multiple nodes, setting parameters, and configuring the entire system with a single command."]}),"\n",(0,l.jsx)(n.h3,{id:"python-launch-api-the-modern-approach",children:"Python Launch API (The Modern Approach)"}),"\n",(0,l.jsxs)(n.p,{children:["ROS 2 supports Python launch files, which offer more flexibility than the older XML format. Python launch files are executable scripts that leverage the ",(0,l.jsx)(n.code,{children:"launch"})," and ",(0,l.jsx)(n.code,{children:"launch_ros"})," libraries."]}),"\n",(0,l.jsx)(n.h3,{id:"basic-launch-file-structure",children:"Basic Launch File Structure"}),"\n",(0,l.jsxs)(n.p,{children:["Create a ",(0,l.jsx)(n.code,{children:"launch/"})," directory in your package and add a launch file:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src/my_robot_controller/launch\ntouch ~/ros2_ws/src/my_robot_controller/launch/controller_launch.py\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Example"}),": ",(0,l.jsx)(n.code,{children:"controller_launch.py"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='turtlesim',\n            executable='turtlesim_node',\n            name='sim'\n        ),\n        Node(\n            package='my_robot_controller',\n            executable='velocity_publisher',\n            name='controller',\n            output='screen'\n        ),\n    ])\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Key Components"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"generate_launch_description()"})})," - Required function that returns a ",(0,l.jsx)(n.code,{children:"LaunchDescription"})," object"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"LaunchDescription([...])"})})," - Container for all launch actions (nodes, parameters, etc.)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"Node(...)"})})," - Declares a node to launch with configuration"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Node() Parameters"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"package"})})," - ROS 2 package containing the executable"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"executable"})})," - Entry point name from ",(0,l.jsx)(n.code,{children:"setup.py"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"name"})})," - Node name in the ROS 2 graph (overrides default)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"output"})})," - Set to ",(0,l.jsx)(n.code,{children:"'screen'"})," to display logs in terminal (default: log files)"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"launching-multiple-nodes",children:"Launching Multiple Nodes"}),"\n",(0,l.jsx)(n.p,{children:"This launch file starts both turtlesim and a custom controller:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ros2 launch my_robot_controller controller_launch.py\n"})}),"\n",(0,l.jsx)(n.p,{children:"Output:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"[INFO] [launch]: All log files can be found below /home/user/.ros/log/...\n[INFO] [launch]: Default logging verbosity is set to INFO\n[INFO] [turtlesim_node-1]: process started with pid [12345]\n[INFO] [velocity_publisher-2]: process started with pid [12346]\n[turtlesim_node-1] [INFO] [turtlesim]: Starting turtlesim with node name /sim\n[velocity_publisher-2] [INFO] [controller]: Publishing velocity commands\n"})}),"\n",(0,l.jsx)(n.h3,{id:"advanced-launch-file-parameters-and-remapping",children:"Advanced Launch File: Parameters and Remapping"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import LaunchConfiguration\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    # Declare launch arguments (configurable parameters)\n    use_sim_time = LaunchConfiguration('use_sim_time', default='false')\n\n    return LaunchDescription([\n        DeclareLaunchArgument(\n            'use_sim_time',\n            default_value='false',\n            description='Use simulation time if true'\n        ),\n\n        Node(\n            package='my_robot_controller',\n            executable='velocity_publisher',\n            name='controller',\n            output='screen',\n            parameters=[{\n                'use_sim_time': use_sim_time,\n                'max_velocity': 2.0,\n                'update_rate': 10.0,\n            }],\n            remappings=[\n                ('/cmd_vel', '/turtle1/cmd_vel'),\n            ],\n        ),\n\n        Node(\n            package='my_robot_controller',\n            executable='pose_subscriber',\n            name='pose_monitor',\n            output='screen',\n            remappings=[\n                ('/pose', '/turtle1/pose'),\n            ],\n        ),\n    ])\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"New Features"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"DeclareLaunchArgument"})})," - Defines configurable parameters passable at launch time"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ros2 launch my_robot_controller controller_launch.py use_sim_time:=true\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"parameters=[{...}]"})})," - Sets ROS 2 parameters for the node"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Parameters must be declared in your node code with ",(0,l.jsx)(n.code,{children:"self.declare_parameter()"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"remappings=[(...)]"})})," - Redirects topic names"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Example: Node publishes to ",(0,l.jsx)(n.code,{children:"/cmd_vel"}),", but turtlesim expects ",(0,l.jsx)(n.code,{children:"/turtle1/cmd_vel"})]}),"\n",(0,l.jsx)(n.li,{children:"Remapping connects them without changing node code"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"installing-launch-files",children:"Installing Launch Files"}),"\n",(0,l.jsxs)(n.p,{children:["To use launch files with ",(0,l.jsx)(n.code,{children:"ros2 launch"}),", they must be installed. Update your ",(0,l.jsx)(n.code,{children:"setup.py"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"import os\nfrom glob import glob\nfrom setuptools import setup\n\npackage_name = 'my_robot_controller'\n\nsetup(\n    # ... existing configuration ...\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n        # Install launch files\n        (os.path.join('share', package_name, 'launch'),\n            glob('launch/*.py')),\n    ],\n    # ... rest of setup.py ...\n)\n"})}),"\n",(0,l.jsxs)(n.p,{children:["After modifying ",(0,l.jsx)(n.code,{children:"setup.py"}),", rebuild:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"colcon build --packages-select my_robot_controller\nsource install/setup.bash\n"})}),"\n",(0,l.jsx)(n.h3,{id:"why-use-launch-files",children:"Why Use Launch Files?"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Multi-node orchestration"}),": Start entire robot systems (sensors + processing + control) with one command"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Reproducible configurations"}),": Consistent parameter settings across deployments"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Environment flexibility"}),": Override parameters for testing vs. production"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Dependency management"}),": Launch files can wait for services or topics to be ready"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Developer productivity"}),": Eliminates manual terminal juggling"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"xml-vs-python-launch-files",children:"XML vs. Python Launch Files"}),"\n",(0,l.jsxs)(n.p,{children:["ROS 2 supports both, but ",(0,l.jsx)(n.strong,{children:"Python is recommended"})," for new projects:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Python"}),": Programmatic (loops, conditionals, functions), easier to debug, better IDE support"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"XML"}),": Declarative, simpler for basic cases, legacy compatibility with ROS 1"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"For this course, we focus on Python launch files to leverage programming concepts you already know."}),"\n",(0,l.jsx)(n.h2,{id:"workspace-organization",children:"Workspace Organization"}),"\n",(0,l.jsxs)(n.p,{children:["When you build ROS 2 packages, you're working within a ",(0,l.jsx)(n.strong,{children:"workspace"}),"\u2014a directory structure that separates source code, build artifacts, installed executables, and logs. Understanding this organization is crucial for debugging build errors and managing multiple projects."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n    Workspace[ros2_ws/<br/>ROS 2 Workspace] --\x3e Src[src/<br/>Source Packages]\n    Workspace --\x3e Build[build/<br/>Build Artifacts]\n    Workspace --\x3e Install[install/<br/>Installed Files]\n    Workspace --\x3e Log[log/<br/>Build Logs]\n\n    Src --\x3e Pkg1[my_robot_package/]\n    Src --\x3e Pkg2[sensor_package/]\n    Src --\x3e Pkg3[control_package/]\n\n    Build --\x3e BuildPkg1[my_robot_package/]\n    Build --\x3e BuildPkg2[sensor_package/]\n\n    Install --\x3e InstallSetup[setup.bash<br/>Environment Setup]\n    Install --\x3e InstallLocal[local_setup.bash]\n    Install --\x3e InstallLib[lib/<br/>Executables]\n\n    Log --\x3e LogBuild[build_*.log]\n    Log --\x3e LogTest[test_*.log]\n\n    style Workspace fill:#e1f5ff,stroke:#01579b,stroke-width:3px\n    style Src fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px\n    style Build fill:#fff4e1,stroke:#ff6f00,stroke-width:2px\n    style Install fill:#f3e5f5,stroke:#4a148c,stroke-width:2px\n    style Log fill:#fce4ec,stroke:#880e4f,stroke-width:2px\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.em,{children:"Figure 2: ROS 2 workspace showing src, install, build, log directories and their relationships"})}),"\n",(0,l.jsx)(n.h3,{id:"the-four-directories",children:"The Four Directories"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"src/"})," - Your source code lives here. Every package you create or clone goes into this directory. When you run ",(0,l.jsx)(n.code,{children:"ros2 pkg create"}),", it generates a package subdirectory inside ",(0,l.jsx)(n.code,{children:"src/"}),". This is the ",(0,l.jsx)(n.strong,{children:"only directory you directly modify"}),"\u2014the others are generated by the build system. Think of ",(0,l.jsx)(n.code,{children:"src/"})," as your Git-tracked code repository."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"build/"})," - Build artifacts and intermediate compilation files. When ",(0,l.jsx)(n.code,{children:"colcon build"})," runs, it creates a subdirectory here for each package, containing object files, CMake caches, and other compilation byproducts. ",(0,l.jsxs)(n.strong,{children:["You never edit files in ",(0,l.jsx)(n.code,{children:"build/"})]}),"\u2014it's entirely managed by the build system. If you encounter build errors, sometimes deleting ",(0,l.jsx)(n.code,{children:"build/"})," and rebuilding from scratch resolves corruption issues."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"install/"})," - The final destination for built executables, libraries, and data files. After a successful build, ",(0,l.jsx)(n.code,{children:"colcon"})," installs your packages here following a standard ROS 2 filesystem hierarchy. This directory contains:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"setup.bash"})})," - The master environment script you source to use your workspace"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"local_setup.bash"})})," - Sources only this workspace (not underlying workspaces)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"lib/<package_name>/"})})," - Executable binaries from your entry points"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"share/<package_name>/"})})," - Data files like launch files, config files, meshes"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["When you run ",(0,l.jsx)(n.code,{children:"ros2 run my_package my_node"}),", ROS 2 finds the executable in ",(0,l.jsx)(n.code,{children:"install/lib/my_package/my_node"}),"."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"log/"})," - Build logs, test outputs, and diagnostic information. Each ",(0,l.jsx)(n.code,{children:"colcon build"})," run creates timestamped log files here. When builds fail, check ",(0,l.jsx)(n.code,{children:"log/latest_build/"})," for detailed error messages. Test results also go here when you run ",(0,l.jsx)(n.code,{children:"colcon test"}),". These logs are invaluable for debugging\u2014always examine them before asking for help."]}),"\n",(0,l.jsx)(n.h3,{id:"why-this-separation-matters",children:"Why This Separation Matters"}),"\n",(0,l.jsxs)(n.p,{children:["This structure enables ",(0,l.jsx)(n.strong,{children:"clean rebuilds"})," (delete ",(0,l.jsx)(n.code,{children:"build/"})," and ",(0,l.jsx)(n.code,{children:"install/"}),", keep ",(0,l.jsx)(n.code,{children:"src/"}),"), ",(0,l.jsx)(n.strong,{children:"workspace overlays"})," (multiple workspaces stacked on top of each other), and ",(0,l.jsx)(n.strong,{children:"parallel builds"})," (build artifacts isolated per package). It also mirrors professional CI/CD pipelines where source, build, and install directories are separate stages."]}),"\n",(0,l.jsx)(n.h3,{id:"typical-workflow",children:"Typical Workflow"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Create/modify code"}),": Edit files in ",(0,l.jsx)(n.code,{children:"src/my_package/"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Build"}),": Run ",(0,l.jsx)(n.code,{children:"colcon build"})," from workspace root (generates ",(0,l.jsx)(n.code,{children:"build/"})," and ",(0,l.jsx)(n.code,{children:"install/"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Source"}),": Run ",(0,l.jsx)(n.code,{children:"source install/setup.bash"})," (adds executables to PATH)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Test"}),": Run ",(0,l.jsx)(n.code,{children:"ros2 run my_package my_node"})," (uses ",(0,l.jsx)(n.code,{children:"install/"})," executables)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Debug"}),": Check ",(0,l.jsx)(n.code,{children:"log/latest_build/"})," if anything fails"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["This pattern repeats throughout development. The key insight: ",(0,l.jsxs)(n.strong,{children:["you only touch ",(0,l.jsx)(n.code,{children:"src/"})]}),", the build system manages the rest."]}),"\n",(0,l.jsx)(n.h2,{id:"building-with-colcon",children:"Building with colcon"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"colcon"})," is ROS 2's build tool, replacing ",(0,l.jsx)(n.code,{children:"catkin_make"})," from ROS 1. It compiles your packages, resolves dependencies, and installs executables into the workspace. Understanding ",(0,l.jsx)(n.code,{children:"colcon"})," is essential because every code change requires a rebuild."]}),"\n",(0,l.jsx)(n.h3,{id:"basic-build-command",children:"Basic Build Command"}),"\n",(0,l.jsxs)(n.p,{children:["From your workspace root (NOT inside ",(0,l.jsx)(n.code,{children:"src/"}),"):"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"What happens"}),":"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"colcon"})," scans ",(0,l.jsx)(n.code,{children:"src/"})," for packages (detects ",(0,l.jsx)(n.code,{children:"package.xml"})," files)"]}),"\n",(0,l.jsx)(n.li,{children:"Resolves dependencies between packages (builds in correct order)"}),"\n",(0,l.jsx)(n.li,{children:"Compiles each package (C++ nodes, Python setup.py, etc.)"}),"\n",(0,l.jsxs)(n.li,{children:["Installs executables and files to ",(0,l.jsx)(n.code,{children:"install/"})]}),"\n",(0,l.jsxs)(n.li,{children:["Generates environment setup scripts (",(0,l.jsx)(n.code,{children:"setup.bash"}),")"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Output"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Starting >>> my_robot_controller\nFinished <<< my_robot_controller [2.45s]\n\nSummary: 1 package finished [2.67s]\n"})}),"\n",(0,l.jsx)(n.h3,{id:"building-specific-packages",children:"Building Specific Packages"}),"\n",(0,l.jsx)(n.p,{children:"When working on a single package, rebuild just that package to save time:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"colcon build --packages-select my_robot_controller\n"})}),"\n",(0,l.jsx)(n.p,{children:"This skips unmodified packages. For multiple specific packages:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"colcon build --packages-select my_robot_controller sensor_package\n"})}),"\n",(0,l.jsx)(n.h3,{id:"useful-build-flags",children:"Useful Build Flags"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"--symlink-install"})," - Creates symbolic links instead of copying files. Changes to Python scripts and launch files take effect immediately without rebuilding:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"colcon build --symlink-install\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Critical for Python development"}),": Without ",(0,l.jsx)(n.code,{children:"--symlink-install"}),", every Python code change requires a full rebuild. With it, only ",(0,l.jsx)(n.code,{children:"setup.py"})," changes need rebuilding."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"--packages-up-to"})," - Builds a package and all its dependencies:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"colcon build --packages-up-to control_package\n"})}),"\n",(0,l.jsxs)(n.p,{children:["If ",(0,l.jsx)(n.code,{children:"control_package"})," depends on ",(0,l.jsx)(n.code,{children:"sensor_package"}),", both get built."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"--packages-skip"})," - Excludes specific packages:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"colcon build --packages-skip broken_package\n"})}),"\n",(0,l.jsx)(n.p,{children:"Useful when one package has build errors but you need to work on others."}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"--event-handlers console_direct+"})," - Shows build output in real-time (default is buffered):"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"colcon build --event-handlers console_direct+\n"})}),"\n",(0,l.jsx)(n.p,{children:"Essential for debugging build failures\u2014you see errors immediately."}),"\n",(0,l.jsx)(n.h3,{id:"common-build-errors",children:"Common Build Errors"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:'Error: "package.xml not found"'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Cause"}),": Running ",(0,l.jsx)(n.code,{children:"colcon build"})," outside workspace root"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Solution"}),": ",(0,l.jsx)(n.code,{children:"cd ~/ros2_ws"})," then retry"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:'Error: "Setup script not found"'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Cause"}),": Haven't sourced ROS 2 environment"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Solution"}),": ",(0,l.jsx)(n.code,{children:"source /opt/ros/humble/setup.bash"})," before building"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:'Error: "ModuleNotFoundError" in Python nodes'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Cause"}),": Forgot to rebuild after adding dependencies to ",(0,l.jsx)(n.code,{children:"package.xml"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Solution"}),": ",(0,l.jsx)(n.code,{children:"colcon build --packages-select your_package"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Error: Build freezes at specific package"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Cause"}),": Infinite loop or deadlock in CMake/setup.py"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Solution"}),": Ctrl+C, examine ",(0,l.jsx)(n.code,{children:"log/latest_build/<package>/"}),", fix code, delete ",(0,l.jsx)(n.code,{children:"build/<package>/"}),", rebuild"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"clean-builds",children:"Clean Builds"}),"\n",(0,l.jsx)(n.p,{children:"When in doubt, clean rebuild:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"rm -rf build/ install/ log/\ncolcon build\n"})}),"\n",(0,l.jsx)(n.p,{children:"This deletes all generated files and rebuilds from scratch. Useful after major changes like switching ROS 2 versions or updating system dependencies."}),"\n",(0,l.jsx)(n.h3,{id:"build-parallelization",children:"Build Parallelization"}),"\n",(0,l.jsxs)(n.p,{children:["By default, ",(0,l.jsx)(n.code,{children:"colcon"})," builds packages in parallel using all CPU cores. Control this with:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"colcon build --parallel-workers 4\n"})}),"\n",(0,l.jsx)(n.p,{children:"Reduce if your system runs out of memory during builds."}),"\n",(0,l.jsx)(n.h2,{id:"sourcing-workspaces",children:"Sourcing Workspaces"}),"\n",(0,l.jsxs)(n.p,{children:["Building creates executables, but ROS 2 won't find them until you ",(0,l.jsx)(n.strong,{children:"source"})," the workspace. Sourcing modifies your shell environment (PATH, PYTHONPATH, etc.) to include your workspace's installed files."]}),"\n",(0,l.jsx)(n.h3,{id:"the-setup-script",children:"The Setup Script"}),"\n",(0,l.jsx)(n.p,{children:"After every build, source the install directory:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"source ~/ros2_ws/install/setup.bash\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"What this does"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Adds ",(0,l.jsx)(n.code,{children:"install/lib/<package>/"})," to PATH (so ",(0,l.jsx)(n.code,{children:"ros2 run"})," finds executables)"]}),"\n",(0,l.jsxs)(n.li,{children:["Adds ",(0,l.jsx)(n.code,{children:"install/lib/python3.10/site-packages/"})," to PYTHONPATH (for Python imports)"]}),"\n",(0,l.jsx)(n.li,{children:"Sets ROS_PACKAGE_PATH and other ROS 2 environment variables"}),"\n",(0,l.jsx)(n.li,{children:"Registers your packages with ROS 2's discovery system"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"You must source after every build"})," to pick up changes. If you modify code, rebuild, but forget to source, you'll run the ",(0,l.jsx)(n.strong,{children:"old version"})," of your node."]}),"\n",(0,l.jsx)(n.h3,{id:"shell-specific-setup-files",children:"Shell-Specific Setup Files"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Bash"}),": ",(0,l.jsx)(n.code,{children:"source install/setup.bash"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Zsh"}),": ",(0,l.jsx)(n.code,{children:"source install/setup.zsh"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"PowerShell"})," (Windows): ",(0,l.jsx)(n.code,{children:"install/setup.ps1"})]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"colcon"})," generates setup files for all shells automatically."]}),"\n",(0,l.jsx)(n.h3,{id:"automatic-sourcing",children:"Automatic Sourcing"}),"\n",(0,l.jsxs)(n.p,{children:["Add to ",(0,l.jsx)(n.code,{children:"~/.bashrc"})," to source automatically in new terminals:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'echo "source ~/ros2_ws/install/setup.bash" >> ~/.bashrc\nsource ~/.bashrc\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Caution"}),": Only add this ",(0,l.jsx)(n.strong,{children:"after"})," you've verified your workspace builds successfully. Broken workspaces can prevent new terminals from opening."]}),"\n",(0,l.jsx)(n.h3,{id:"workspace-overlays",children:"Workspace Overlays"}),"\n",(0,l.jsxs)(n.p,{children:["ROS 2 supports layered workspaces\u2014source multiple workspaces to combine packages. ",(0,l.jsx)(n.strong,{children:"Overlay"})," workspaces stack on top of an ",(0,l.jsx)(n.strong,{children:"underlay"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Underlay: ROS 2 system installation\nsource /opt/ros/humble/setup.bash\n\n# Overlay: Your workspace\nsource ~/ros2_ws/install/setup.bash\n"})}),"\n",(0,l.jsxs)(n.p,{children:["When package names conflict, the ",(0,l.jsx)(n.strong,{children:"last sourced workspace wins"}),". This lets you override system packages with custom versions."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Example"}),": You want to modify ",(0,l.jsx)(n.code,{children:"turtlesim"}),". Clone it to ",(0,l.jsx)(n.code,{children:"~/ros2_ws/src/"}),", build, and source. Now ",(0,l.jsx)(n.code,{children:"ros2 run turtlesim turtlesim_node"})," uses ",(0,l.jsx)(n.strong,{children:"your"})," version, not the system's."]}),"\n",(0,l.jsx)(n.h3,{id:"setupbash-vs-local_setupbash",children:"setup.bash vs. local_setup.bash"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"setup.bash"})})," - Sources this workspace ",(0,l.jsx)(n.strong,{children:"and all underlying workspaces"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"local_setup.bash"})})," - Sources ",(0,l.jsx)(n.strong,{children:"only this workspace"})," (assumes underlay already sourced)"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Typical usage:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# One-step sourcing (includes ROS 2 base)\nsource ~/ros2_ws/install/setup.bash\n\n# Two-step sourcing (explicit layers)\nsource /opt/ros/humble/setup.bash\nsource ~/ros2_ws/install/local_setup.bash\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Both approaches are equivalent for single-workspace setups. Use ",(0,l.jsx)(n.code,{children:"local_setup.bash"})," when managing complex multi-workspace overlays."]}),"\n",(0,l.jsx)(n.h3,{id:"verifying-sourcing",children:"Verifying Sourcing"}),"\n",(0,l.jsx)(n.p,{children:"Check if your workspace is sourced:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# List packages ROS 2 can see\nros2 pkg list | grep my_robot_controller\n\n# List executables in your package\nros2 pkg executables my_robot_controller\n"})}),"\n",(0,l.jsx)(n.p,{children:"If these commands show your packages, sourcing worked. If not, verify:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"You sourced the correct path"}),"\n",(0,l.jsxs)(n.li,{children:["You sourced ",(0,l.jsx)(n.strong,{children:"after"})," building"]}),"\n",(0,l.jsx)(n.li,{children:"The build completed without errors"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"mini-project-turtlesim-controller",children:"Mini-Project: Turtlesim Controller"}),"\n",(0,l.jsx)(n.p,{children:"Now that you understand package structure, building, and sourcing, let's consolidate this knowledge by creating a complete ROS 2 package from scratch. This mini-project demonstrates the entire workflow: package creation, node implementation, configuration, building, and launching."}),"\n",(0,l.jsx)(n.h3,{id:"project-goal",children:"Project Goal"}),"\n",(0,l.jsxs)(n.p,{children:["Create a ",(0,l.jsx)(n.code,{children:"turtlesim_controller"})," package that autonomously moves the turtlesim turtle in a circular pattern. This requires:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["A Python node that publishes velocity commands (",(0,l.jsx)(n.code,{children:"geometry_msgs/Twist"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:["Proper package configuration (",(0,l.jsx)(n.code,{children:"package.xml"}),", ",(0,l.jsx)(n.code,{children:"setup.py"}),")"]}),"\n",(0,l.jsx)(n.li,{children:"A launch file that starts both turtlesim and the controller"}),"\n",(0,l.jsx)(n.li,{children:"Successful build and execution in your workspace"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"This mirrors real-world robotics: controlling a simulated robot with custom navigation logic, packaged for reuse and distribution."}),"\n",(0,l.jsx)(n.h3,{id:"step-1-create-the-package",children:"Step 1: Create the Package"}),"\n",(0,l.jsxs)(n.p,{children:["Navigate to your workspace's ",(0,l.jsx)(n.code,{children:"src/"})," directory and create the package with required dependencies:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python turtlesim_controller \\\n  --dependencies rclpy geometry_msgs turtlesim \\\n  --description "Autonomous controller for turtlesim turtle" \\\n  --license Apache-2.0\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"What just happened"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Created ",(0,l.jsx)(n.code,{children:"turtlesim_controller/"})," package directory"]}),"\n",(0,l.jsxs)(n.li,{children:["Generated ",(0,l.jsx)(n.code,{children:"package.xml"})," with ",(0,l.jsx)(n.code,{children:"rclpy"}),", ",(0,l.jsx)(n.code,{children:"geometry_msgs"}),", and ",(0,l.jsx)(n.code,{children:"turtlesim"})," dependencies"]}),"\n",(0,l.jsxs)(n.li,{children:["Created Python module structure: ",(0,l.jsx)(n.code,{children:"turtlesim_controller/turtlesim_controller/"})]}),"\n",(0,l.jsxs)(n.li,{children:["Set up ",(0,l.jsx)(n.code,{children:"setup.py"})," and ",(0,l.jsx)(n.code,{children:"setup.cfg"})," for building"]}),"\n",(0,l.jsxs)(n.li,{children:["Created ",(0,l.jsx)(n.code,{children:"test/"})," directory with linter tests"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Verify"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ls turtlesim_controller/\n# Output: package.xml  setup.py  setup.cfg  resource/  turtlesim_controller/  test/\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-2-create-the-controller-node",children:"Step 2: Create the Controller Node"}),"\n",(0,l.jsx)(n.p,{children:"Create a new Python file for the controller node:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src/turtlesim_controller/turtlesim_controller\ntouch circle_controller.py\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Open ",(0,l.jsx)(n.code,{children:"circle_controller.py"})," in your editor and add the controller code (see code example below). The node will:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Publish ",(0,l.jsx)(n.code,{children:"Twist"})," messages to ",(0,l.jsx)(n.code,{children:"/turtle1/cmd_vel"})," at 10 Hz"]}),"\n",(0,l.jsx)(n.li,{children:"Set linear velocity to move forward"}),"\n",(0,l.jsx)(n.li,{children:"Set angular velocity to turn, creating circular motion"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Key implementation details"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Inherits from ",(0,l.jsx)(n.code,{children:"rclpy.node.Node"})," (modern ROS 2 pattern)"]}),"\n",(0,l.jsxs)(n.li,{children:["Uses ",(0,l.jsx)(n.code,{children:"create_publisher()"})," for ",(0,l.jsx)(n.code,{children:"geometry_msgs/Twist"})," messages"]}),"\n",(0,l.jsx)(n.li,{children:"Timer callback runs at 10 Hz (0.1-second intervals)"}),"\n",(0,l.jsxs)(n.li,{children:["Velocity values: ",(0,l.jsx)(n.code,{children:"linear.x = 2.0"})," m/s, ",(0,l.jsx)(n.code,{children:"angular.z = 1.0"})," rad/s"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-3-configure-entry-points",children:"Step 3: Configure Entry Points"}),"\n",(0,l.jsxs)(n.p,{children:["Edit ",(0,l.jsx)(n.code,{children:"setup.py"})," to make the controller executable. Locate the ",(0,l.jsx)(n.code,{children:"entry_points"})," section and add:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"entry_points={\n    'console_scripts': [\n        'circle_controller = turtlesim_controller.circle_controller:main',\n    ],\n},\n"})}),"\n",(0,l.jsxs)(n.p,{children:["This creates a ",(0,l.jsx)(n.code,{children:"circle_controller"})," command that runs the ",(0,l.jsx)(n.code,{children:"main()"})," function from ",(0,l.jsx)(n.code,{children:"circle_controller.py"}),". After building, you'll be able to run:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ros2 run turtlesim_controller circle_controller\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Note"}),": The package.xml dependencies were already added by ",(0,l.jsx)(n.code,{children:"ros2 pkg create"})," with the ",(0,l.jsx)(n.code,{children:"--dependencies"})," flag. If you created the package without that flag, you'd manually add:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:"<depend>rclpy</depend>\n<depend>geometry_msgs</depend>\n<depend>turtlesim</depend>\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-4-create-the-launch-file",children:"Step 4: Create the Launch File"}),"\n",(0,l.jsxs)(n.p,{children:["Create a ",(0,l.jsx)(n.code,{children:"launch/"})," directory and launch file:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"mkdir ~/ros2_ws/src/turtlesim_controller/launch\ncd ~/ros2_ws/src/turtlesim_controller/launch\ntouch turtlesim_circle.launch.py\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Edit ",(0,l.jsx)(n.code,{children:"turtlesim_circle.launch.py"})," with the launch configuration (see code example below). This launch file will:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Start ",(0,l.jsx)(n.code,{children:"turtlesim_node"})," (the simulator)"]}),"\n",(0,l.jsxs)(n.li,{children:["Start ",(0,l.jsx)(n.code,{children:"circle_controller"})," (your controller)"]}),"\n",(0,l.jsx)(n.li,{children:"Set output to screen for both nodes (logs visible in terminal)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-5-install-launch-files",children:"Step 5: Install Launch Files"}),"\n",(0,l.jsxs)(n.p,{children:["Update ",(0,l.jsx)(n.code,{children:"setup.py"})," to install launch files. Add these imports at the top:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"import os\nfrom glob import glob\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Then modify the ",(0,l.jsx)(n.code,{children:"data_files"})," list to include launch files:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"data_files=[\n    ('share/ament_index/resource_index/packages',\n        ['resource/' + package_name]),\n    ('share/' + package_name, ['package.xml']),\n    # Add this line to install launch files\n    (os.path.join('share', package_name, 'launch'), glob('launch/*.py')),\n],\n"})}),"\n",(0,l.jsxs)(n.p,{children:["This tells ",(0,l.jsx)(n.code,{children:"colcon"})," to copy all ",(0,l.jsx)(n.code,{children:".py"})," files from ",(0,l.jsx)(n.code,{children:"launch/"})," into the install directory."]}),"\n",(0,l.jsx)(n.h3,{id:"step-6-build-the-package",children:"Step 6: Build the Package"}),"\n",(0,l.jsx)(n.p,{children:"From your workspace root, build the package:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select turtlesim_controller --symlink-install\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Flags explained"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"--packages-select"}),": Builds only ",(0,l.jsx)(n.code,{children:"turtlesim_controller"}),", not other packages in workspace"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"--symlink-install"}),": Creates symlinks for Python files, so code changes don't require rebuilding (only ",(0,l.jsx)(n.code,{children:"setup.py"})," changes need rebuilding)"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Expected output"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Starting >>> turtlesim_controller\nFinished <<< turtlesim_controller [1.23s]\n\nSummary: 1 package finished [1.45s]\n"})}),"\n",(0,l.jsx)(n.p,{children:"If you see errors, check:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"package.xml"})," has all dependencies"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"setup.py"})," entry_points syntax is correct (note the comma after the entry)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"circle_controller.py"})," has a ",(0,l.jsx)(n.code,{children:"main()"})," function"]}),"\n",(0,l.jsx)(n.li,{children:"No Python syntax errors in your node code"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-7-source-the-workspace",children:"Step 7: Source the Workspace"}),"\n",(0,l.jsx)(n.p,{children:"Source the workspace to register the new package:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"source ~/ros2_ws/install/setup.bash\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Verify package installation"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ros2 pkg list | grep turtlesim_controller\n# Output: turtlesim_controller\n\nros2 pkg executables turtlesim_controller\n# Output: turtlesim_controller circle_controller\n"})}),"\n",(0,l.jsxs)(n.p,{children:["If ",(0,l.jsx)(n.code,{children:"turtlesim_controller"})," doesn't appear, ensure you sourced ",(0,l.jsx)(n.strong,{children:"after"})," building successfully."]}),"\n",(0,l.jsx)(n.h3,{id:"step-8-run-the-mini-project",children:"Step 8: Run the Mini-Project"}),"\n",(0,l.jsx)(n.p,{children:"Launch the complete system with a single command:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ros2 launch turtlesim_controller turtlesim_circle.launch.py\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"What you should see"}),":"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"A turtlesim window opens with a turtle in the center"}),"\n",(0,l.jsxs)(n.li,{children:["Terminal shows logs from both ",(0,l.jsx)(n.code,{children:"turtlesim_node"})," and ",(0,l.jsx)(n.code,{children:"circle_controller"})]}),"\n",(0,l.jsx)(n.li,{children:"The turtle moves in a circular pattern continuously"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Expected terminal output"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"[INFO] [launch]: All log files can be found below /home/user/.ros/log/...\n[INFO] [launch]: Default logging verbosity is set to INFO\n[INFO] [turtlesim-1]: process started with pid [12345]\n[INFO] [circle_controller-2]: process started with pid [12346]\n[turtlesim-1] [INFO] [turtlesim]: Starting turtlesim with node name /turtlesim\n[circle_controller-2] [INFO] [circle_controller]: Circle controller started\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Stop the system"}),": Press ",(0,l.jsx)(n.code,{children:"Ctrl+C"})," in the terminal. Both nodes will shut down gracefully."]}),"\n",(0,l.jsx)(n.h3,{id:"step-9-experiment-and-extend",children:"Step 9: Experiment and Extend"}),"\n",(0,l.jsx)(n.p,{children:"Now that the basic system works, try these modifications:"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Square pattern"}),": Change the controller to move in a square instead of a circle. Hint: Alternate between straight motion (angular.z = 0) and 90-degree turns (linear.x = 0)."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Speed control"}),": Add a parameter for velocity using ",(0,l.jsx)(n.code,{children:"self.declare_parameter()"})," and ",(0,l.jsx)(n.code,{children:"self.get_parameter()"}),"."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Topic remapping"}),": Launch turtlesim on a different topic namespace and remap the controller's topic in the launch file."]}),"\n",(0,l.jsx)(n.h3,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Turtle doesn't move"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Check topic names: ",(0,l.jsx)(n.code,{children:"ros2 topic list"})," (should show ",(0,l.jsx)(n.code,{children:"/turtle1/cmd_vel"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:["Check message flow: ",(0,l.jsx)(n.code,{children:"ros2 topic echo /turtle1/cmd_vel"})," (should show Twist messages)"]}),"\n",(0,l.jsxs)(n.li,{children:["Verify controller is running: ",(0,l.jsx)(n.code,{children:"ros2 node list"})," (should show ",(0,l.jsx)(n.code,{children:"/circle_controller"}),")"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Build errors"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Check ",(0,l.jsx)(n.code,{children:"log/latest_build/turtlesim_controller/"})," for detailed error messages"]}),"\n",(0,l.jsx)(n.li,{children:"Ensure all Python files have correct indentation (4 spaces, not tabs)"}),"\n",(0,l.jsxs)(n.li,{children:["Verify ",(0,l.jsx)(n.code,{children:"setup.py"})," entry_points syntax (common mistake: missing comma)"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Launch file not found"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Ensure you ran ",(0,l.jsx)(n.code,{children:"colcon build"})," ",(0,l.jsx)(n.strong,{children:"after"})," adding the glob import and data_files line"]}),"\n",(0,l.jsxs)(n.li,{children:["Verify launch file installed: ",(0,l.jsx)(n.code,{children:"ls ~/ros2_ws/install/turtlesim_controller/share/turtlesim_controller/launch/"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"what-youve-learned",children:"What You've Learned"}),"\n",(0,l.jsx)(n.p,{children:"This mini-project demonstrates the complete ROS 2 package development cycle:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Package creation"})," with proper dependencies"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Node implementation"})," using ",(0,l.jsx)(n.code,{children:"rclpy.node.Node"})," pattern"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Entry point configuration"})," in ",(0,l.jsx)(n.code,{children:"setup.py"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Launch file creation"})," with Python API"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Build process"})," with ",(0,l.jsx)(n.code,{children:"colcon"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Workspace sourcing"})," for environment setup"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"System execution"})," with ",(0,l.jsx)(n.code,{children:"ros2 launch"})]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["These are the ",(0,l.jsx)(n.strong,{children:"exact same steps"})," you'd follow to build a real robot controller\u2014whether it's a warehouse robot, drone, or autonomous car. The only difference is the complexity of the control logic and the number of nodes. The workflow remains identical: create, configure, build, source, launch."]}),"\n",(0,l.jsx)(n.h3,{id:"controller-node-code",children:"Controller Node Code"}),"\n",(0,l.jsxs)(n.p,{children:["Here's the complete ",(0,l.jsx)(n.code,{children:"circle_controller.py"})," implementation:"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"File"}),": ",(0,l.jsx)(n.code,{children:"turtlesim_controller/turtlesim_controller/circle_controller.py"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'import rclpy\nfrom rclpy.node import Node\nfrom geometry_msgs.msg import Twist\n\n\nclass CircleController(Node):\n    """\n    A ROS 2 node that publishes velocity commands to make the turtle move in a circle.\n\n    This node demonstrates:\n    - Creating a publisher for Twist messages\n    - Using timers for periodic publishing\n    - Setting linear and angular velocities\n    """\n\n    def __init__(self):\n        super().__init__(\'circle_controller\')\n\n        # Create publisher for velocity commands\n        # Topic: /turtle1/cmd_vel (turtlesim\'s default velocity topic)\n        # Message type: geometry_msgs/Twist\n        # Queue size: 10 (buffer for up to 10 messages)\n        self.publisher_ = self.create_publisher(Twist, \'/turtle1/cmd_vel\', 10)\n\n        # Create timer for periodic publishing\n        # Timer period: 0.1 seconds (10 Hz publishing rate)\n        # Callback: self.timer_callback (called every 0.1 seconds)\n        timer_period = 0.1  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n\n        # Log startup message\n        self.get_logger().info(\'Circle controller started - turtle will move in a circle\')\n\n    def timer_callback(self):\n        """\n        Timer callback function - called at 10 Hz.\n\n        Creates and publishes a Twist message with:\n        - Linear velocity: 2.0 m/s (forward motion)\n        - Angular velocity: 1.0 rad/s (turning motion)\n\n        The combination of constant linear and angular velocities\n        creates circular motion.\n        """\n        # Create a new Twist message\n        msg = Twist()\n\n        # Set linear velocity (forward/backward motion)\n        # x: forward/backward (positive = forward)\n        # y: left/right (not used in 2D turtlesim)\n        # z: up/down (not used in 2D turtlesim)\n        msg.linear.x = 2.0  # Move forward at 2.0 m/s\n        msg.linear.y = 0.0\n        msg.linear.z = 0.0\n\n        # Set angular velocity (rotation)\n        # x: roll (not used in 2D turtlesim)\n        # y: pitch (not used in 2D turtlesim)\n        # z: yaw (rotation in 2D plane, positive = counter-clockwise)\n        msg.angular.x = 0.0\n        msg.angular.y = 0.0\n        msg.angular.z = 1.0  # Turn counter-clockwise at 1.0 rad/s\n\n        # Publish the velocity command\n        self.publisher_.publish(msg)\n\n\ndef main(args=None):\n    """\n    Main function - entry point for the node.\n\n    Workflow:\n    1. Initialize rclpy library\n    2. Create CircleController node instance\n    3. Spin (keep node alive and processing callbacks)\n    4. Cleanup on shutdown\n    """\n    # Initialize the rclpy library\n    rclpy.init(args=args)\n\n    # Create an instance of the CircleController node\n    circle_controller = CircleController()\n\n    # Spin the node (process callbacks until shutdown)\n    # This keeps the timer callback running at 10 Hz\n    rclpy.spin(circle_controller)\n\n    # Cleanup: destroy node and shutdown rclpy\n    # (This runs after Ctrl+C or ros2 node kill)\n    circle_controller.destroy_node()\n    rclpy.shutdown()\n\n\n# Entry point when script is run directly\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Code Explanation"}),":"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 1-3"}),": Import required modules"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"rclpy"}),": ROS 2 Python client library"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Node"}),": Base class for all ROS 2 nodes"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Twist"}),": Message type for velocity commands (linear + angular)"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 6-14"}),": Class definition and docstring"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"CircleController"})," inherits from ",(0,l.jsx)(n.code,{children:"Node"})]}),"\n",(0,l.jsx)(n.li,{children:"Docstring explains purpose and key concepts"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 16-31"}),": Constructor (",(0,l.jsx)(n.code,{children:"__init__"}),")"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Line 17"}),": Call parent class constructor with node name ",(0,l.jsx)(n.code,{children:"'circle_controller'"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Lines 23"}),": Create publisher for ",(0,l.jsx)(n.code,{children:"/turtle1/cmd_vel"})," topic","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Turtlesim subscribes to this topic for velocity commands"}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Twist"})," message type has linear and angular velocity fields"]}),"\n",(0,l.jsx)(n.li,{children:"Queue size 10 buffers messages if subscriber is slow"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Lines 28-29"}),": Create timer with 0.1-second period (10 Hz)","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Calls ",(0,l.jsx)(n.code,{children:"timer_callback()"})," every 100 milliseconds"]}),"\n",(0,l.jsx)(n.li,{children:"Provides smooth, continuous motion"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Line 32"}),": Log startup message (visible with ",(0,l.jsx)(n.code,{children:"output='screen'"})," in launch file)"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 34-64"}),": Timer callback"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Line 47"}),": Create new ",(0,l.jsx)(n.code,{children:"Twist"})," message for each callback"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Lines 54"}),": Set ",(0,l.jsx)(n.code,{children:"linear.x = 2.0"})," (move forward at 2 m/s)","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"In turtlesim, positive x is forward motion"}),"\n",(0,l.jsx)(n.li,{children:"Turtle will continuously move forward"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Lines 63"}),": Set ",(0,l.jsx)(n.code,{children:"angular.z = 1.0"})," (turn at 1 rad/s counter-clockwise)","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"In 2D, angular.z controls rotation (yaw)"}),"\n",(0,l.jsx)(n.li,{children:"Positive values turn left (counter-clockwise)"}),"\n",(0,l.jsx)(n.li,{children:"1.0 rad/s \u2248 57.3 degrees/second"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Line 66"}),": Publish the message","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Sent to all subscribers on ",(0,l.jsx)(n.code,{children:"/turtle1/cmd_vel"})]}),"\n",(0,l.jsx)(n.li,{children:"Turtlesim receives and moves the turtle"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 69-94"}),": Main function"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Line 79"}),": Initialize rclpy (must be called before using ROS 2 features)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Line 82"}),": Instantiate ",(0,l.jsx)(n.code,{children:"CircleController"})," node"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Line 87"}),": Spin the node (keeps it running and processing callbacks)","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Without spin, timer callback never executes"}),"\n",(0,l.jsx)(n.li,{children:"Blocks until Ctrl+C or node shutdown"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Lines 91-92"}),": Cleanup on exit","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Destroy node resources"}),"\n",(0,l.jsx)(n.li,{children:"Shutdown rclpy library"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 96-97"}),": Python entry point"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Allows running with ",(0,l.jsx)(n.code,{children:"python3 circle_controller.py"})," for testing"]}),"\n",(0,l.jsxs)(n.li,{children:["In production, use ",(0,l.jsx)(n.code,{children:"ros2 run"})," which calls ",(0,l.jsx)(n.code,{children:"main()"})," via entry points"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Why Circular Motion?"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Constant ",(0,l.jsx)(n.code,{children:"linear.x > 0"}),": Turtle moves forward continuously"]}),"\n",(0,l.jsxs)(n.li,{children:["Constant ",(0,l.jsx)(n.code,{children:"angular.z > 0"}),": Turtle turns continuously"]}),"\n",(0,l.jsx)(n.li,{children:"Result: Forward motion + continuous turning = circular path"}),"\n",(0,l.jsx)(n.li,{children:"Radius of circle \u2248 linear.x / angular.z = 2.0 / 1.0 = 2 meters"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Modifying for Square Motion"}),":\nTo create square motion, you'd alternate between:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Straight: ",(0,l.jsx)(n.code,{children:"linear.x = 2.0, angular.z = 0.0"})," (4 seconds)"]}),"\n",(0,l.jsxs)(n.li,{children:["Turn 90\xb0: ",(0,l.jsx)(n.code,{children:"linear.x = 0.0, angular.z = 1.57"})," (1 second for \u03c0/2 radians)"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Implement this using a state machine in the timer callback."}),"\n",(0,l.jsx)(n.h3,{id:"package-configuration-packagexml",children:"Package Configuration (package.xml)"}),"\n",(0,l.jsxs)(n.p,{children:["Here's the complete ",(0,l.jsx)(n.code,{children:"package.xml"})," for the turtlesim controller:"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"File"}),": ",(0,l.jsx)(n.code,{children:"turtlesim_controller/package.xml"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>turtlesim_controller</name>\n  <version>0.0.0</version>\n  <description>Autonomous controller for turtlesim turtle</description>\n  <maintainer email="you@example.com">Your Name</maintainer>\n  <license>Apache-2.0</license>\n\n  \x3c!-- Build tool dependency --\x3e\n  <buildtool_depend>ament_python</buildtool_depend>\n\n  \x3c!-- Runtime dependencies --\x3e\n  <depend>rclpy</depend>\n  <depend>geometry_msgs</depend>\n  <depend>turtlesim</depend>\n\n  \x3c!-- Testing dependencies --\x3e\n  <test_depend>ament_copyright</test_depend>\n  <test_depend>ament_flake8</test_depend>\n  <test_depend>ament_pep257</test_depend>\n  <test_depend>python3-pytest</test_depend>\n\n  <export>\n    <build_type>ament_python</build_type>\n  </export>\n</package>\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Key Elements"}),":"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 1-2"}),": XML declaration and schema"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Format 3 is the current ROS 2 package format"}),"\n",(0,l.jsx)(n.li,{children:"Schema URL validates the XML structure"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 4-8"}),": Package metadata"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"name"}),": Must match package directory name"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"version"}),": Semantic versioning (major.minor.patch)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"description"}),": Brief summary for ",(0,l.jsx)(n.code,{children:"ros2 pkg list"})," output"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"maintainer"}),": Contact info (used if package is distributed)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"license"}),": Apache-2.0 is ROS 2's recommended license"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 11"}),": Build tool dependency"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ament_python"}),": ROS 2 build system for Python packages"]}),"\n",(0,l.jsxs)(n.li,{children:["Used by ",(0,l.jsx)(n.code,{children:"colcon build"})," to determine how to build this package"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 14-16"}),": Runtime dependencies"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"rclpy"})," (line 14): ROS 2 Python client library","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Required for ",(0,l.jsx)(n.code,{children:"Node"}),", ",(0,l.jsx)(n.code,{children:"create_publisher"}),", ",(0,l.jsx)(n.code,{children:"create_timer"}),", etc."]}),"\n",(0,l.jsxs)(n.li,{children:["Without this, ",(0,l.jsx)(n.code,{children:"import rclpy"})," fails"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"geometry_msgs"})," (line 15): Standard geometry message types","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Provides ",(0,l.jsx)(n.code,{children:"Twist"})," message definition"]}),"\n",(0,l.jsx)(n.li,{children:"Contains linear and angular velocity fields"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"turtlesim"})," (line 16): Turtlesim simulator package","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Required to run turtlesim_node in launch file"}),"\n",(0,l.jsx)(n.li,{children:"Provides the simulation environment"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 19-22"}),": Test dependencies"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Linters and formatters for code quality"}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ament_copyright"}),": Checks license headers"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ament_flake8"}),": Python style checker (PEP 8)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ament_pep257"}),": Docstring style checker"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"python3-pytest"}),": Unit testing framework"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 24-26"}),": Export section"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Declares this is an ",(0,l.jsx)(n.code,{children:"ament_python"})," package"]}),"\n",(0,l.jsxs)(n.li,{children:["Tells ",(0,l.jsx)(n.code,{children:"colcon"})," to use Python build process (not CMake)"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Dependency Types"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<buildtool_depend>"}),": Tools needed to build the package"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<depend>"}),": Required at both build and runtime"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<test_depend>"}),": Only needed for testing (not in production)"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["These dependencies were automatically added by the ",(0,l.jsx)(n.code,{children:"--dependencies"})," flag when creating the package. If you add new nodes that use different message types (e.g., ",(0,l.jsx)(n.code,{children:"sensor_msgs"})," for laser scans), add them here:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:"<depend>sensor_msgs</depend>\n"})}),"\n",(0,l.jsx)(n.h3,{id:"build-configuration-setuppy",children:"Build Configuration (setup.py)"}),"\n",(0,l.jsxs)(n.p,{children:["Here's the complete ",(0,l.jsx)(n.code,{children:"setup.py"})," for the turtlesim controller:"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"File"}),": ",(0,l.jsx)(n.code,{children:"turtlesim_controller/setup.py"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"import os\nfrom glob import glob\nfrom setuptools import setup\n\npackage_name = 'turtlesim_controller'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n        # Install launch files\n        (os.path.join('share', package_name, 'launch'), glob('launch/*.py')),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='Your Name',\n    maintainer_email='you@example.com',\n    description='Autonomous controller for turtlesim turtle',\n    license='Apache-2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'circle_controller = turtlesim_controller.circle_controller:main',\n        ],\n    },\n)\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Key Elements"}),":"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 1-3"}),": Imports"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"os"}),": Operating system interface (for file paths)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"glob"}),": Pattern matching for files (",(0,l.jsx)(n.code,{children:"launch/*.py"})," finds all Python launch files)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"setuptools"}),": Python packaging library (standard for ROS 2)"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Line 5"}),": Package name variable"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Used throughout setup.py to avoid repetition"}),"\n",(0,l.jsx)(n.li,{children:"Must match package directory and package.xml name"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 7-31"}),": Setup function call"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Central configuration for package installation"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 8-10"}),": Basic metadata"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"name"}),": Package name (must match directory)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"version"}),": Same as package.xml"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"packages"}),": List of Python modules to install (just ",(0,l.jsx)(n.code,{children:"turtlesim_controller"}),")"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 11-17"}),": Data files to install"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Lines 12-13"}),": Resource index (required for ROS 2 package discovery)","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Installs marker file in ",(0,l.jsx)(n.code,{children:"share/ament_index/resource_index/packages/"})]}),"\n",(0,l.jsxs)(n.li,{children:["Enables ",(0,l.jsx)(n.code,{children:"ros2 pkg list"})," to find this package"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Line 14"}),": Package manifest","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Copies ",(0,l.jsx)(n.code,{children:"package.xml"})," to ",(0,l.jsx)(n.code,{children:"share/turtlesim_controller/"})]}),"\n",(0,l.jsxs)(n.li,{children:["Used by ",(0,l.jsx)(n.code,{children:"ros2 pkg xml"})," command"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Line 16"}),": Launch files","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"IMPORTANT"}),": This line installs launch files from ",(0,l.jsx)(n.code,{children:"launch/"})," directory"]}),"\n",(0,l.jsxs)(n.li,{children:["Without this, ",(0,l.jsx)(n.code,{children:"ros2 launch"})," cannot find launch files"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"glob('launch/*.py')"})," finds all ",(0,l.jsx)(n.code,{children:".py"})," files in launch/"]}),"\n",(0,l.jsxs)(n.li,{children:["Installs to ",(0,l.jsx)(n.code,{children:"share/turtlesim_controller/launch/"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 18-23"}),": Additional metadata"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"install_requires"}),": Python packages needed (setuptools is standard)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"zip_safe"}),": Always True for ROS 2 Python packages"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"maintainer/email"}),": Contact information"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"description"}),": Package summary"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"license"}),": Same as package.xml"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"tests_require"}),": Testing framework (pytest)"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 24-28"}),": Entry points (THE CRITICAL SECTION)"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"console_scripts"}),": Defines executable commands"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Line 26"}),": Creates ",(0,l.jsx)(n.code,{children:"circle_controller"})," command"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Format: ",(0,l.jsx)(n.code,{children:"'command_name = package.module:function'"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"command_name"}),": ",(0,l.jsx)(n.code,{children:"circle_controller"})," (what you type with ",(0,l.jsx)(n.code,{children:"ros2 run"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"package.module"}),": ",(0,l.jsx)(n.code,{children:"turtlesim_controller.circle_controller"})," (Python import path)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"function"}),": ",(0,l.jsx)(n.code,{children:"main"})," (function to call from that module)"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["When you run ",(0,l.jsx)(n.code,{children:"ros2 run turtlesim_controller circle_controller"}),", ROS 2:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Looks up ",(0,l.jsx)(n.code,{children:"circle_controller"})," in entry_points"]}),"\n",(0,l.jsxs)(n.li,{children:["Imports ",(0,l.jsx)(n.code,{children:"turtlesim_controller.circle_controller"})," module"]}),"\n",(0,l.jsxs)(n.li,{children:["Calls ",(0,l.jsx)(n.code,{children:"main()"})," function from that module"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Adding More Nodes"}),":\nIf you create additional nodes, add more entries:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"entry_points={\n    'console_scripts': [\n        'circle_controller = turtlesim_controller.circle_controller:main',\n        'square_controller = turtlesim_controller.square_controller:main',\n        'path_follower = turtlesim_controller.path_follower:main',\n    ],\n},\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Common Mistake"}),": Forgetting the comma after each entry. Python requires commas in lists!"]}),"\n",(0,l.jsx)(n.h3,{id:"launch-file-code",children:"Launch File Code"}),"\n",(0,l.jsx)(n.p,{children:"Here's the complete launch file for the turtlesim controller:"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"File"}),": ",(0,l.jsx)(n.code,{children:"turtlesim_controller/launch/turtlesim_circle.launch.py"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\n\ndef generate_launch_description():\n    \"\"\"\n    Launch file that starts:\n    1. Turtlesim simulator (turtlesim_node)\n    2. Circle controller node (circle_controller)\n\n    Both nodes output logs to the terminal screen.\n    \"\"\"\n    return LaunchDescription([\n        # Start turtlesim simulator\n        Node(\n            package='turtlesim',\n            executable='turtlesim_node',\n            name='turtlesim',\n            output='screen'\n        ),\n\n        # Start circle controller\n        Node(\n            package='turtlesim_controller',\n            executable='circle_controller',\n            name='circle_controller',\n            output='screen'\n        ),\n    ])\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Code Explanation"}),":"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 1-2"}),": Imports"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"launch.LaunchDescription"}),": Container for launch actions"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"launch_ros.actions.Node"}),": Action to launch a ROS 2 node"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 5-29"}),": Launch description generator function"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Required name"}),": ",(0,l.jsx)(n.code,{children:"generate_launch_description"})," (ROS 2 convention)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Must return"}),": ",(0,l.jsx)(n.code,{children:"LaunchDescription"})," object containing launch actions"]}),"\n",(0,l.jsxs)(n.li,{children:["This function is called when you run ",(0,l.jsx)(n.code,{children:"ros2 launch"})]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 13-29"}),": LaunchDescription with two Node actions"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Nodes launch sequentially in list order"}),"\n",(0,l.jsx)(n.li,{children:"Both nodes run simultaneously (not sequential execution)"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 15-20"}),": Turtlesim simulator node"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"package"}),": ",(0,l.jsx)(n.code,{children:"'turtlesim'"})," (must be installed via dependencies)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"executable"}),": ",(0,l.jsx)(n.code,{children:"'turtlesim_node'"})," (from turtlesim's setup.py entry_points)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"name"}),": ",(0,l.jsx)(n.code,{children:"'turtlesim'"})," (node name in ROS 2 graph, overrides default)","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Without this, node name would be ",(0,l.jsx)(n.code,{children:"/turtlesim_node"})]}),"\n",(0,l.jsxs)(n.li,{children:["With this, node name is ",(0,l.jsx)(n.code,{children:"/turtlesim"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"output"}),": ",(0,l.jsx)(n.code,{children:"'screen'"})," (print logs to terminal)","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Default is to write logs to ",(0,l.jsx)(n.code,{children:"~/.ros/log/"})," files"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"'screen'"})," makes debugging easier (see logs in real-time)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Lines 22-28"}),": Circle controller node"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"package"}),": ",(0,l.jsx)(n.code,{children:"'turtlesim_controller'"})," (our package)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"executable"}),": ",(0,l.jsx)(n.code,{children:"'circle_controller'"})," (from our setup.py entry_points)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"name"}),": ",(0,l.jsx)(n.code,{children:"'circle_controller'"})," (node name in graph)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"output"}),": ",(0,l.jsx)(n.code,{children:"'screen'"})," (see controller logs in terminal)"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Advanced Launch Features"})," (not shown here, but available):"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Parameters"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"Node(\n    package='turtlesim_controller',\n    executable='circle_controller',\n    name='circle_controller',\n    output='screen',\n    parameters=[{\n        'linear_velocity': 2.0,\n        'angular_velocity': 1.0,\n    }]\n)\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Topic Remapping"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"Node(\n    package='turtlesim_controller',\n    executable='circle_controller',\n    name='circle_controller',\n    output='screen',\n    remappings=[\n        ('/turtle1/cmd_vel', '/my_turtle/cmd_vel'),\n    ]\n)\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Namespaces"})," (for multiple turtles):"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"Node(\n    package='turtlesim',\n    executable='turtlesim_node',\n    name='turtlesim',\n    namespace='robot1',\n    output='screen'\n)\n# Topics become: /robot1/turtle1/cmd_vel\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Launch Arguments"})," (runtime configuration):"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"from launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import LaunchConfiguration\n\ndef generate_launch_description():\n    return LaunchDescription([\n        DeclareLaunchArgument(\n            'velocity',\n            default_value='2.0',\n            description='Linear velocity for turtle'\n        ),\n        Node(\n            package='turtlesim_controller',\n            executable='circle_controller',\n            name='circle_controller',\n            output='screen',\n            parameters=[{\n                'linear_velocity': LaunchConfiguration('velocity'),\n            }]\n        ),\n    ])\n\n# Run with: ros2 launch turtlesim_controller turtlesim_circle.launch.py velocity:=3.0\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Why Use Launch Files?"})}),"\n",(0,l.jsx)(n.p,{children:"Without launch files, you'd need 2 terminals:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Terminal 1\nros2 run turtlesim turtlesim_node\n\n# Terminal 2\nros2 run turtlesim_controller circle_controller\n"})}),"\n",(0,l.jsx)(n.p,{children:"With launch files, one command starts everything:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ros2 launch turtlesim_controller turtlesim_circle.launch.py\n"})}),"\n",(0,l.jsx)(n.p,{children:"For complex robots with 10+ nodes (cameras, lidars, planners, controllers), launch files are essential. This mini-project demonstrates the same pattern used in production robotics systems."}),"\n",(0,l.jsx)(n.h2,{id:"hands-on-exercises",children:"Hands-On Exercises"}),"\n",(0,l.jsx)(n.p,{children:"Apply what you've learned by building packages from scratch:"}),"\n",(0,l.jsx)(n.h3,{id:"exercise-1-create-your-first-package",children:"Exercise 1: Create Your First Package"}),"\n",(0,l.jsxs)(n.p,{children:["Create an empty ROS 2 package named ",(0,l.jsx)(n.code,{children:"my_first_pkg"})," with dependencies on ",(0,l.jsx)(n.code,{children:"rclpy"})," and ",(0,l.jsx)(n.code,{children:"std_msgs"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python my_first_pkg \\\n  --dependencies rclpy std_msgs \\\n  --description "My first ROS 2 package"\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Challenge"}),": Build the package and verify it appears in ",(0,l.jsx)(n.code,{children:"ros2 pkg list"}),"."]}),"\n",(0,l.jsx)(n.h3,{id:"exercise-2-add-a-node-from-chapter-2",children:"Exercise 2: Add a Node from Chapter 2"}),"\n",(0,l.jsxs)(n.p,{children:["Take the publisher node you wrote in Chapter 2 (Nodes, Topics, and Services) and integrate it into ",(0,l.jsx)(n.code,{children:"my_first_pkg"}),":"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Copy your publisher script to ",(0,l.jsx)(n.code,{children:"my_first_pkg/my_first_pkg/publisher_node.py"})]}),"\n",(0,l.jsxs)(n.li,{children:["Add the entry point to ",(0,l.jsx)(n.code,{children:"setup.py"}),":","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"'my_publisher = my_first_pkg.publisher_node:main',\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Build with ",(0,l.jsx)(n.code,{children:"colcon build --packages-select my_first_pkg --symlink-install"})]}),"\n",(0,l.jsxs)(n.li,{children:["Source and run with ",(0,l.jsx)(n.code,{children:"ros2 run my_first_pkg my_publisher"})]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Expected Result"}),": Your node runs and publishes messages to its topic."]}),"\n",(0,l.jsx)(n.h3,{id:"exercise-3-create-a-launch-file",children:"Exercise 3: Create a Launch File"}),"\n",(0,l.jsx)(n.p,{children:"Write a Python launch file that starts both a publisher and subscriber node together:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Create ",(0,l.jsx)(n.code,{children:"my_first_pkg/launch/pubsub.launch.py"})]}),"\n",(0,l.jsxs)(n.li,{children:["Use the ",(0,l.jsx)(n.code,{children:"Node"})," action to start both executables"]}),"\n",(0,l.jsxs)(n.li,{children:["Update ",(0,l.jsx)(n.code,{children:"setup.py"})," to include launch files in ",(0,l.jsx)(n.code,{children:"data_files"})]}),"\n",(0,l.jsxs)(n.li,{children:["Test with ",(0,l.jsx)(n.code,{children:"ros2 launch my_first_pkg pubsub.launch.py"})]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Challenge"}),": Add ",(0,l.jsx)(n.code,{children:"output='screen'"})," to see logs from both nodes in the same terminal."]}),"\n",(0,l.jsx)(n.h3,{id:"exercise-4-extend-the-turtlesim-controller",children:"Exercise 4: Extend the Turtlesim Controller"}),"\n",(0,l.jsxs)(n.p,{children:["Modify the ",(0,l.jsx)(n.code,{children:"circle_controller.py"})," to make the turtle move in a ",(0,l.jsx)(n.strong,{children:"square pattern"})," instead of a circle:"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Hints"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:'Use a state machine with 4 states: "moving_forward", "turning_left" (repeat 4 times)'}),"\n",(0,l.jsxs)(n.li,{children:["Track elapsed time with ",(0,l.jsx)(n.code,{children:"self.get_clock().now()"})]}),"\n",(0,l.jsx)(n.li,{children:"Move straight for 2 seconds, turn 90\xb0 for ~1.57 seconds (\u03c0/2 radians at 1.0 rad/s)"}),"\n",(0,l.jsx)(n.li,{children:"Reset to state 0 after completing 4 sides"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Expected Result"}),": The turtle draws a square path in the turtlesim window."]}),"\n",(0,l.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Packages"})," are the fundamental unit of organization in ROS 2, containing nodes, launch files, configuration, and dependencies in a standardized structure."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"package.xml"})," defines metadata and dependencies, while ",(0,l.jsx)(n.strong,{children:"setup.py"})," configures build settings and creates executable entry points for your nodes."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"colcon build"})," compiles packages with powerful flags like ",(0,l.jsx)(n.code,{children:"--symlink-install"})," (instant Python changes) and ",(0,l.jsx)(n.code,{children:"--packages-select"})," (build specific packages)."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Launch files"})," (using the Python API, not XML) orchestrate multiple nodes, set parameters, remap topics, and define namespaces\u2014essential for multi-node robotics systems."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Workspace organization"})," separates source code (",(0,l.jsx)(n.code,{children:"src/"}),"), build artifacts (",(0,l.jsx)(n.code,{children:"build/"}),"), installed executables (",(0,l.jsx)(n.code,{children:"install/"}),"), and logs (",(0,l.jsx)(n.code,{children:"log/"}),") for clean development workflows."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Sourcing"})," the workspace with ",(0,l.jsx)(n.code,{children:"source install/setup.bash"})," updates environment variables so ROS 2 can discover your packages and executables."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Entry points"})," in ",(0,l.jsx)(n.code,{children:"setup.py"})," map command names to Python functions, enabling ",(0,l.jsx)(n.code,{children:"ros2 run package_name executable_name"})," to work seamlessly."]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Previous"}),": ",(0,l.jsx)(n.a,{href:"/physical-ai-humanoid-robotics/docs/module-1-ros2/nodes-topics-services",children:"Nodes, Topics, and Services"}),"\n",(0,l.jsx)(n.strong,{children:"Next"}),": ",(0,l.jsx)(n.a,{href:"/physical-ai-humanoid-robotics/docs/module-2-gazebo/intro-gazebo",children:"Module 2: Gazebo & Unity"})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>o});var r=s(6540);const l={},i=r.createContext(l);function c(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);